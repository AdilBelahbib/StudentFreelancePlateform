
<ui:composition template="../templates/common.xhtml"
xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:sec="http://www.springframework.org/security/tags">
<ui:define name="content"> 


<div class="container">
  <h1>Profil</h1>
  
  <div class="row">
    <!-- left column -->
    <div class="col-md-3">
      <div class="text-center">
        <img src="" class="avatar img-circle" alt="avatar"/>
        <h6>Modifier votre photo de profil</h6>
        
        <h:inputFile class="form-control"/>
      </div>
    </div>
    
    <!-- edit form column -->
    <div class="col-md-9 personal-info">
      <h3>Informations personnelles</h3>
      
      <form class="form-horizontal" role="form">
        <div class="form-group">
          <label class="col-lg-3 control-label">Nom:</label>
          <h:outputText value="#{sessionScope.utilisateur.nom}" />
        </div>
        <div class="form-group">
          <label class="col-lg-3 control-label">Prénom:</label>
          <h:outputText value="#{sessionScope.utilisateur.prenom}" />
        </div>
        <div class="form-group">
          <label class="col-lg-3 control-label">Date de naissance:</label>
          <h:outputText value="#{sessionScope.utilisateur.dateNaissance}">
          <f:convertDateTime pattern="dd/MM/yyyy" />
        </h:outputText>
      </div>
      <div class="form-group">
        <label class="col-lg-3 control-label">Email:</label>
        <h:outputText value="#{sessionScope.utilisateur.email}" />
      </div>
      <div class="form-group">
        <div class="col-md-12">
          <button data-toggle="modal" data-target="#modifierinfos" class="btn btn-default" type="button" >Modifier</button>
      </div>
    </div>
  </form>
</div>

<!-- LES ADRESSES -->
<div class="col-md-9 personal-info">
  <h3>Adresses</h3>
  <div class="col-md-10">
   <div class="form-group">
    <button data-toggle="modal" data-target="#ajoutadresse" class="btn btn-default btn-lg pull-right" type="button" >+</button>
    <h:form enctype="multipart/form-data">
    <table class="table table-striped table-hover">
     <tr>
      <th>Adresses</th>
    </tr>

    <c:forEach items="#{sessionScope.utilisateur.adresses}" var="adresse" varStatus="statut">
    <tr>
      <td>#{adresse.adresse} #{adresse.ville} #{adresse.pays}</td>
      <td>
        
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
        
        <h:commandButton action="#{etudiantController.retirerAdresse()}" styleClass="close">
        <f:setPropertyActionListener target="#{etudiantController.adresse}" value="#{adresse}" />
      </h:commandButton>
    </td>
  </tr>
</c:forEach>
</table>
</h:form>


</div>
</div>
</div>
<!-- /LES ADRESSES -->

<!-- LES FORMATIONS -->
<div class="col-md-9 personal-info">
  <h3>Formations </h3>
  
  <div class="col-xs-12">
    <div class="col-md-12">
      <button data-toggle="modal" data-target="#ajoutformation"
      class="btn btn-default btn-lg pull-right inscriptionAjoutButton"
      type="button">+</button>

      <table class="table table-striped table-hover">
        <c:forEach items="#{sessionScope.utilisateur.qualifications}" var="formation" varStatus="statut">
        <c:if test="${formation['class'].simpleName == 'Formation'}">
        
        <tr>
          <td>
            <h3>#{formation.intituleFormation}</h3>
            <h4>#{formation.etablissement}</h4>
            <h5>
              <h:outputText value="#{formation.dateDebut}">
              <f:convertDateTime pattern="dd/MM/yyyy" />
            </h:outputText>
            =>
            <h:outputText value="#{formation.dateFin}">
            <f:convertDateTime pattern="dd/MM/yyyy" />
          </h:outputText>
        </h5>
        
        <h5>
          <button data-toggle="modal" data-target="#detailsformation-#{statut.count}" type="button" class="btn btn-default ">...</button>
        </h5>
      </td>
    </tr>
  </c:if>
</c:forEach>

</table>

</div>
</div>
</div>

<!-- /LES FORMATIONS -->

<!-- LES EXPERIENCES -->
<div class="col-md-9 personal-info">
  <h3>Expériences professionnelles</h3>
  
	<div class="col-xs-12">
		<div class="col-md-12">
			<button data-toggle="modal" data-target="#ajoutexperience"
			type="button"
			class="btn btn-default btn-lg pull-right inscriptionAjoutButton">+</button>
			<table class="table table-striped table-hover">
			
				<c:forEach items="#{sessionScope.utilisateur.qualifications}" var="experience" varStatus="statut">
				<c:if test="${experience['class'].simpleName == 'Experience'}">
				<tr>
					<td>
					<h3>#{experience.sujet}</h3>
					<h4>#{experience.structureAccueil}</h4>
					
					<h5>
			              <h:outputText value="#{experience.dateDebut}">
			              <f:convertDateTime pattern="dd/MM/yyyy" />
			            </h:outputText>
			            =>
			            <h:outputText value="#{experience.dateFin}">
			            <f:convertDateTime pattern="dd/MM/yyyy" />
			          </h:outputText>
			        </h5>
					</td>
					<td>
						<button data-toggle="modal" data-target="#detailsexperience-#{statut.count}" type="button" class="btn btn-default ">...</button>
					</td>
				</tr>
			</c:if>
		</c:forEach>
	</table>

</div>
</div>
</div>

<!-- /LES EXPERIENCES -->

</div>
</div>


<!-- LES MODALS -->
<!-- MODAL: Ajout adresse-->
<div class="modal fade" id="ajoutadresse" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
        <h3 class="modal-title" id="lineModalLabel">Ajout adresse</h3>
      </div>
      <div class="modal-body">

        <!-- content goes here -->
        <h:form enctype="multipart/form-data">

        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
        <div class="form-group">
          <label for="adresse">Adresse</label>
          <div class='input-group date'>
            <h:inputText id="adresse" value="#{etudiantController.adresse.adresse}" styleClass="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="ville">Ville</label>
          <div class='input-group date'>
            <h:inputText id="ville" value="#{etudiantController.adresse.ville}" styleClass="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="pays">Pays</label>
          <h:inputText id="pays" value="#{etudiantController.adresse.pays}" styleClass="form-control" />
        </div>

        <div class="btn-group" role="group">
          <h:commandButton action="#{etudiantController.ajouterAdresse()}" styleClass="btn btn-success btn-hover-green" value="Ajouter"/>
        </div>

      </h:form>

    </div>
    <div class="modal-footer">
      <div class="btn-group btn-group-justified" role="group" aria-label="group button">
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" data-dismiss="modal"  role="button">Fermer</button>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<!-- /MODAL: Ajout adresse-->

<!-- MODAL: Ajout formation-->
<div class="modal fade" id="ajoutformation" tabindex="-1"
role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">
				<span aria-hidden="true">×</span><span class="sr-only">Close</span>
			</button>
			<h3 class="modal-title" id="lineModalLabel">Ajout
				formation</h3>
			</div>
			<div class="modal-body">

				<!-- content goes here -->
				<h:form enctype="multipart/form-data">

				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />

				<div class="form-group">
					<label for="intitule">Intitulé</label>
					<h:inputText id="intitule" value="#{etudiantController.formation.intituleFormation}" styleClass="form-control" />
				</div>
				<div class="form-group">
					<label for="etablissement">Etablissement</label>
					<h:inputText id="etablissement" value="#{etudiantController.formation.etablissement}" styleClass="form-control" />
				</div>
				<div class="form-group">
					<label for="dateDebut">Date début</label>
					<div class='input-group date'>

						<h:inputText id="dateDebut" value="#{etudiantController.formation.dateDebut}"
						styleClass="form-control">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
					<span class="input-group-addon"> <span
						class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
			</div>
			<div class="form-group">
				<label for="dateFin">Date fin</label>
				<div class='input-group date'>

					<h:inputText id="dateFin" value="#{etudiantController.formation.dateFin}"
					styleClass="form-control">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:inputText>
				<span class="input-group-addon"> <span
					class="glyphicon glyphicon-calendar"></span>
				</span>
			</div>
		</div>
		<div class="form-group">
			<label for="fichierAttache">Joindre un fichier</label> <input
			type="file" id="fichierAttache" />
		</div>

		<div class="btn-group" role="group">
			<h:commandButton action="#{etudiantController.ajouterFormation()}" styleClass="btn btn-success btn-hover-green" value="Ajouter"/>
		</div>
	</h:form>

</div>
<div class="modal-footer">
	<div class="btn-group btn-group-justified" role="group"
	aria-label="group button">
	<div class="btn-group" role="group">
		<button type="button" class="btn btn-default"
		data-dismiss="modal" role="button">Fermer</button>
	</div>
</div>
</div>
</div>
</div>
</div>

<!-- /MODAL: Ajout formation-->

<!-- MODAL: Détails formation-->

<c:forEach items="#{sessionScope.utilisateur.qualifications}" var="formation" varStatus="statut">
<c:if test="${formation['class'].simpleName == 'Formation'}">
<div class="modal fade" id="detailsformation-#{statut.count}" tabindex="-1"
role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">
				<span aria-hidden="true">×</span><span class="sr-only">Close</span>
			</button>
			<h3 class="modal-title" id="lineModalLabel">Ajout
				formation</h3>
			</div>
			<div class="modal-body">

				<!-- content goes here -->
				<div class="form-group">
					<label>Date début: 
						<h:outputText value="#{formation.dateDebut}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</label>
			</div>
			<div class="form-group">
				<label>Date fin:
					<h:outputText value="#{formation.dateFin}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputText>
			</label>
		</div>
		<div class="form-group">
			<label>Intitulé: <h:outputText value="#{formation.intituleFormation}" /></label>
		</div>
		<div class="form-group">
			<label>Etablissement: <h:outputText value="#{formation.etablissement}" /></label>
		</div>
		<div class="form-group">
			<a href="#">Télécharger le fichier joint</a>
		</div>
	</div>
	<div class="modal-footer">
		<div class="btn-group btn-group-justified" role="group"
		aria-label="group button">
		<div class="btn-group" role="group">
		<h:form enctype="multipart/form-data">
		<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<h:commandButton action="#{etudiantController.retirerFormation()}" styleClass="btn btn-danger btn-hover-green" value="Supprimer">
			<f:setPropertyActionListener target="#{etudiantController.formation}" value="#{formation}" />
			</h:commandButton>
		</h:form>
	</div>
	<div class="btn-group" role="group">
		<button type="button" class="btn btn-default"
		data-dismiss="modal" role="button">Fermer</button>
</div>
</div>
</div>
</div>
</div>
</div>
</c:if>
</c:forEach>
<!-- /MODAL: Détails formation-->

<!-- MODAL: détails expérience-->

<c:forEach items="#{sessionScope.utilisateur.qualifications}" var="experience" varStatus="statut">
<c:if test="${experience['class'].simpleName == 'Experience'}">
<div class="modal fade" id="detailsexperience-#{statut.count}" tabindex="-1"
role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">
				<span aria-hidden="true">×</span><span class="sr-only">Close</span>
			</button>
			<h3 class="modal-title" id="lineModalLabel">Entreprise</h3>
		</div>
		<div class="modal-body">

			<!-- content goes here -->
			<form>

				<div class="form-group">
					<label>Sujet: <h:outputText value="#{experience.sujet}" /></label>
				</div>
				<div class="form-group">
					<label>Structure d'accueil: <h:outputText value="#{experience.structureAccueil}" /></label>
				</div>
				<div class="form-group">
					<label>Date début:
						<h:outputText value="#{experience.dateDebut}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</label>
			</div>
			<div class="form-group">
				<label>Date fin:
					<h:outputText value="#{experience.dateFin}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:outputText>
			</label>
		</div>
		<div class="form-group">
			<label>Responsabilité: <h:outputText value="#{experience.responsabilite}" /></label>
		</div>
		<div class="form-group">
			<label>Type d'expérience: <h:outputText value="#{experience.typeExperience}" /></label>
		</div>
		<div class="form-group">
			<label>Salaire: 
				<h:outputText value="#{experience.salaire}">
				<f:convertNumber minFractionDigits="2" />
			</h:outputText>
		</label>
	</div>
	<div class="form-group">
		<a href="#">Télécharger le fichier joint</a>
	</div>
</form>

</div>
<div class="modal-footer">
	<div class="btn-group btn-group-justified" role="group"
	aria-label="group button">
	
	<div class="btn-group" role="group">
		
		<h:form enctype="multipart/form-data">
		<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
		
		<h:commandButton action="#{etudiantController.retirerExperience()}" styleClass="btn btn-danger btn-hover-green" value="Supprimer">
		<f:setPropertyActionListener target="#{etudiantController.experience}" value="#{experience}" />
	</h:commandButton>
</h:form>
</div>

<div class="btn-group" role="group">
	<button type="button" class="btn btn-default"
	data-dismiss="modal" role="button">Fermer</button>
</div>
</div>
</div>
</div>
</div>
</div>
</c:if>
</c:forEach>
<!-- /MODAL: détails expérience-->



<!-- MODAL: ajout expérience-->
<div class="modal fade" id="ajoutexperience" tabindex="-1"
role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">
				<span aria-hidden="true">×</span><span class="sr-only">Close</span>
			</button>
			<h3 class="modal-title" id="lineModalLabel">Ajout
				d'expérience</h3>
			</div>
			<div class="modal-body">

				<!-- content goes here -->
				<h:form enctype="multipart/form-data">

				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
				
				<div class="form-group">
					<label for="sujet">Sujet:</label> 
					<h:inputText id="sujet" value="#{etudiantController.experience.sujet}" styleClass="form-control" />
				</div>
				
				<div class="form-group">
					<label for="structureAccueil">Structure d'accueil:</label> 
					<h:inputText id="structureAccueil" value="#{etudiantController.experience.structureAccueil}" styleClass="form-control" />
				</div>
				<div class="form-group">
					<label for="dateDebut">Date début</label>
					<div class='input-group date'>
						<h:inputText id="dateDebut" value="#{etudiantController.experience.dateDebut}"
						styleClass="form-control">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
					<span class="input-group-addon"> <span
						class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
			</div>
			<div class="form-group">
				<label for="dateFin">Date fin</label>
				<div class='input-group date'>
					<h:inputText id="dateFin" value="#{etudiantController.experience.dateFin}"
					styleClass="form-control">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:inputText>
				<span class="input-group-addon"> <span
					class="glyphicon glyphicon-calendar"></span>
				</span>
			</div>
		</div>
		
		<div class="form-group">
			<label for="responsabilite">Responsabilité</label> 
			<h:inputText id="responsabilite" value="#{etudiantController.experience.responsabilite}" styleClass="form-control" />
		</div>
		<div class="form-group">
			<label for="typeExperience">Type d'expérience</label>
			<h:inputText id="typeExperience" value="#{etudiantController.experience.typeExperience}" styleClass="form-control" />
		</div>
		<div class="form-group">
			<label for="salaire">Salaire</label>

			<h:inputText id="salaire" value="#{etudiantController.experience.salaire}" styleClass="form-control">
			<f:convertNumber minFractionDigits="2" />
		</h:inputText>
	</div>
	<div class="form-group">
		<label for="fichierAttache">Joindre un fichier</label> <input
		type="file" id="fichierAttache" />
	</div>

	<div class="btn-group" role="group">
		<h:commandButton action="#{etudiantController.ajouterExperience()}" styleClass="btn btn-success btn-hover-green" value="Ajouter"/>
	</div>
</h:form>

</div>
<div class="modal-footer">
	<div class="btn-group btn-group-justified" role="group"
	aria-label="group button">
	<div class="btn-group" role="group">
		<button type="button" class="btn btn-default"
		data-dismiss="modal" role="button">Fermer</button>
	</div>
</div>
</div>
</div>
</div>
</div>
<!-- /MODAL: ajout expérience-->

<!-- MODAL: Modifier les informations-->
<div class="modal fade" id="modifierinfos" tabindex="-1"
role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">
				<span aria-hidden="true">×</span><span class="sr-only">Close</span>
			</button>
			<h3 class="modal-title" id="lineModalLabel">Modifier les informations</h3>
			</div>
			<div class="modal-body">

				<!-- content goes here -->
				<h:form enctype="multipart/form-data">

				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />

				<div class="form-group">
					<label for="nom">Nom</label>
					<h:inputText id="nom" value="#{etudiantController.etudiant.nom}" styleClass="form-control" />
				</div>
				<div class="form-group">
					<label for="prenom">Prenom</label>
					<h:inputText id="prenom" value="#{etudiantController.etudiant.prenom}" styleClass="form-control" />
				</div>
				<div class="form-group">
					<label for="dateNaissance">Date de naissance</label>
					<div class='input-group date'>

						<h:inputText id="dateNaissance" value="#{etudiantController.etudiant.dateNaissance}"
						styleClass="form-control">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
					<span class="input-group-addon"> <span
						class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
			</div>
			<div class="form-group">
					<label for="email">Email</label>
					<h:inputText id="email" value="#{etudiantController.etudiant.email}" styleClass="form-control" />
				</div>
				
			<div class="form-group">
					<label for="motDePasse">Mot de passe</label>
					<h:inputSecret id="motDePasse" value="#{etudiantController.motDePasse}" styleClass="form-control" />
				</div>

		<div class="btn-group" role="group">
			<h:commandButton action="#{etudiantController.modifierEtudiant}" styleClass="btn btn-success btn-hover-green" value="Mettre à jour"/>
		</div>
	</h:form>

</div>
<div class="modal-footer">
	<div class="btn-group btn-group-justified" role="group"
	aria-label="group button">
	<div class="btn-group" role="group">
		<button type="button" class="btn btn-default"
		data-dismiss="modal" role="button">Fermer</button>
	</div>
</div>
</div>
</div>
</div>
</div>

<!-- /MODAL: Modifier les informations-->

</ui:define>
</ui:composition>