<ui:composition template="../templates/common.xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:sec="http://www.springframework.org/security/tags">
<ui:define name="content"> 	
<h:form enctype="multipart/form-data">
<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/> 
	
	<table class="table table-striped table-hover">
			<tr>
				<th>Sujet</th>
			    <th>Statut</th>
			</tr>

			<c:forEach items="#{appelOffreControllerKhouloud.listes}" var="item"
						varStatus="statut">

				<tr>
					<td>#{item.cahierDesCharges}</td>
					<td>#{item.statut}</td>
					<td>
						<button data-toggle="modal"
								data-target="#detailsAppelOffre-#{statut.count}" type="button"
								class="btn btn-default ">...</button>
					</td>
				</tr>
			</c:forEach>
	</table>
	<c:forEach items="#{appelOffreControllerKhouloud.listes}" var="item"
					varStatus="statut">
					<div class="modal fade" id="detailsAppelOffre-#{statut.count}"
						tabindex="-1" role="dialog" aria-labelledby="modalLabel"
						aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">
										<span aria-hidden="true">×</span><span class="sr-only">Close</span>
									</button>
									<h3 class="modal-title" id="lineModalLabel">
									Détails appel d'offre
									</h3>
								</div>
								<div class="modal-body">

									<!-- content goes here -->
									<form>

										<div class="form-group">
											<label>Date début: <h:outputText
													value="#{item.dateDebut}" /></label>
										</div>
										<div class="form-group">
											<label>Date d'expiration: <h:outputText
													value="#{item.dateExpiration}" /></label>
										</div>
										<div class="form-group">
											<label>Statut: <h:outputText
													value="#{item.statut}" /></label>
										</div>
										<div class="form-group">
											<label>Sujet: <h:outputText
													value="#{item.cahierDesCharges.sujet}" /></label>
										</div>
										<div class="form-group">
											<label>Date début du sujet: <h:outputText
													value="#{item.cahierDesCharges.dateDebut}" /></label>
										</div>
										<div class="form-group">
											<label>Date fin du sujet: <h:outputText
													value="#{item.cahierDesCharges.dateFin}" /></label>
										</div>
										<div class="form-group">
											<a href="#">Télécharger le fichier joint</a>
										</div>
										<div>
										<button data-toggle="modal"
										data-target="#ajoutContreProposition-#{statut.count}" type="button"
										class="btn btn-default ">Ajouter une contre-proposition</button>
										</div>
									</form>

								</div>
								<div class="modal-footer">
									<div class="btn-group btn-group-justified" role="group"
										aria-label="group button">

										<div class="btn-group" role="group">
											<button type="button" class="btn btn-default"
												data-dismiss="modal" role="button">Fermer</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
	</c:forEach>
	
	<c:forEach items="#{appelOffreControllerKhouloud.listes}" var="item"
					varStatus="statut">
					<div class="modal fade" id="ajoutContreProposition-#{statut.count}"
						tabindex="-1" role="dialog" aria-labelledby="modalLabel"
						aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">
										<span aria-hidden="true">×</span><span class="sr-only">Close</span>
									</button>
									<h3 class="modal-title" id="lineModalLabel">
									Ajout de contre-proposition
									</h3>
								</div>
								<div class="modal-body">

									<!-- content goes here -->
									<form>

									<div class="form-group">
										<label for="enchere">Enchère</label>
										<h:inputText class="form-control" id="enchere"
										value="#{appelOffreControllerKhouloud.contreProposition.enchere}">
										</h:inputText>
									</div>
									
									<div class="form-group">
										<label for="fichierAttache1">Joindre un fichier</label>
										<h:inputFile id="fichierAttache1">
										</h:inputFile>
									</div>
									</form>

								</div>
								<div class="modal-footer">
									<div class="btn-group btn-group-justified" role="group"
										aria-label="group button">

										<div class="btn-group" role="group">

											<h:form>
												<input type="hidden" name="${_csrf.parameterName}"
													value="${_csrf.token}" />

												<h:commandButton
													action="#{appelOffreControllerKhouloud.ajouterContreProposition}"
													styleClass="btn btn-success btn-hover-green"
													value="Enregistrer">
												</h:commandButton>
											</h:form>
										</div>

										<div class="btn-group" role="group">
											<button type="button" class="btn btn-default"
												data-dismiss="modal" role="button">Fermer</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</c:forEach>
	
	
</h:form>
</ui:define>
</ui:composition>
