<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
template="../templates/common.xhtml"
                xmlns:sec="http://www.springframework.org/security/tags">
	<ui:define name="content">
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<h3>Les contre propositions concernants <h:outputText  value="#{appelOffreController.appelOffre.cahierDesCharges.sujet}" /></h3>				
			</div>
		</div>
		<div class="row">		
				<div class="col-md-offset-1 col-md-10">
				<h:form>
						<div class="form-group">
							<table class="table table-striped table-hover">
							<tr>
								<th>Enchere</th>
								<th>Etudiant</th>
								<th>Piece Jointe</th>
							</tr>
							<c:forEach items="#{appelOffreController.appelOffre.contrePropositions}" var="item" varStatus="statut">
							<tr>
								<td>#{item.enchere} </td>
								<td><button  data-toggle="modal" data-target="#detailsEtudiant-#{statut.count}" type="button" class="btn btn-default ">#{item.etudiant.nom} #{item.etudiant.prenom}</button> </td>
								<td><a> download</a> </td>
								<td>
									<h:commandButton value="Accepter"  action="#{appelOffreController.affecterAppelOffre}" class="btn btn-default" >
			            
										<f:setPropertyActionListener target="#{appelOffreController.contreProposition}" value="#{item}" />
									</h:commandButton>
								</td>
								
								
								<td>
									<h:commandButton value="Refuser"  action="#{appelOffreController.refuserContreProposition()}" class="btn btn-default" >
			            
										<f:setPropertyActionListener target="#{appelOffreController.contreProposition}" value="#{item}" />
									</h:commandButton>
								</td>
							</tr>
							</c:forEach>
						</table>
					</div>
						<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
					
					</h:form>
				</div>
				</div>
		
	
	</ui:define>
	
<!-- modals -->
<c:forEach items="#{appelOffreController.appelOffre.contrePropositions}" var="item" varStatus="statut">
<div class="modal fade" id="detailsEtudiant-#{statut.count}" tabindex="-1"
role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">
				<span aria-hidden="true">Ã—</span><span class="sr-only">Close</span>
			</button>
			<h3 class="modal-title" id="lineModalLabel">Details Etudiant</h3>
		</div>
	<div class="modal-body">

				<!-- content goes here -->
		<div class="row">
				<div class="form-group">
					<label >Nom :</label>
					<h:outputText  value="#{item.etudiant.nom}" />
				</div>
		</div>
		<div class="row">
				<div class="form-group">
					<label >Prenom :</label>
					<h:outputText  value="#{item.etudiant.prenom}" />
				</div>
		</div>
		<div class="row">
			<label>Les competences :</label>
			<c:forEach items="#{item.etudiant.competences}" var="comp" varStatus="statut">
				<li>#{comp.intitule}</li>
			</c:forEach>		
		</div>
	<div class="btn-group" role="group">
		<button type="button" class="btn btn-default"
		data-dismiss="modal" role="button">Fermer</button>
	</div>
</div>
</div>
</div>
</div>

</c:forEach>
</ui:composition>